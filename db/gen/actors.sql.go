// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: actors.sql

package db

import (
	"context"
	"database/sql"
)

const getMoviesByActorId = `-- name: GetMoviesByActorId :many
SELECT m.id as movie_id, m.title, m.release_year, m.poster_url, a.id, a.first_name, a.last_name, a.image_url
FROM movies m
JOIN movie_cast mc ON mc.movie_id = m.id
JOIN actors a ON a.id = mc.actor_id
WHERE mc.actor_id = $1
`

type GetMoviesByActorIdRow struct {
	MovieID     int32          `json:"movie_id"`
	Title       string         `json:"title"`
	ReleaseYear sql.NullInt32  `json:"release_year"`
	PosterUrl   sql.NullString `json:"poster_url"`
	ID          int32          `json:"id"`
	FirstName   string         `json:"first_name"`
	LastName    string         `json:"last_name"`
	ImageUrl    sql.NullString `json:"image_url"`
}

func (q *Queries) GetMoviesByActorId(ctx context.Context, actorID int32) ([]GetMoviesByActorIdRow, error) {
	rows, err := q.db.QueryContext(ctx, getMoviesByActorId, actorID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []GetMoviesByActorIdRow
	for rows.Next() {
		var i GetMoviesByActorIdRow
		if err := rows.Scan(
			&i.MovieID,
			&i.Title,
			&i.ReleaseYear,
			&i.PosterUrl,
			&i.ID,
			&i.FirstName,
			&i.LastName,
			&i.ImageUrl,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}
